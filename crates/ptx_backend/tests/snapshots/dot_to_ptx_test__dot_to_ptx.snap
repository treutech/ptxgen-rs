---
source: crates/ptx_backend/tests/dot_to_ptx_test.rs
expression: actual
---
.version 7.0
.target sm_75
.address_size 64

// Function: dot
// Block: %entry
// Block: %loop
// Block: %body
// Block: %exit
.reg .f32 %acc, %prod, %xval, %yval;
.reg .s32 %0, %1, %idx, %n, %new_sum, %next, %out, %result, %x, %x_, %x__offset, %y, %y_, %y__offset;
.reg .pred %cond;
.entry dot {
    .local .s32 i;
    .local .s32 sum;
    st.global.s32 [%i], %0;
    st.global.s32 [%sum], %0;
    ld.global.s32 %idx, [i];
    setp.lt.s32 %cond, %idx, %n;
    mul.lo.s32 %x__offset, %idx, 4;
    add.s32 %x_, %x, %x__offset;
    mul.lo.s32 %y__offset, %idx, 4;
    add.s32 %y_, %y, %y__offset;
    ld.global.f32 %xval, [x_];
    ld.global.f32 %yval, [y_];
    mul.f32 %prod, %xval, %yval;
    ld.global.f32 %acc, [sum];
    add.f32 %new_sum, %acc, %prod;
    st.global.f32 [%sum], %new_sum;
    add.s32 %next, %idx, %1;
    st.global.s32 [%i], %next;
    ld.global.s32 %result, [sum];
}
